
LÉGENDE DE L'ARCHITECTURE RÉSEAU HYBRIDE PROXMOX
=================================================

 SITES ET INFRASTRUCTURE :
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
• SITE 1 (On-Premise) : Datacenter principal avec services centralisés
• SITE 2 (Remote) : Site distant avec bastion pour accès externe
• Chaque site : Maximum 3 VMs sur Proxmox VE

 SEGMENTATION RÉSEAU :
━━━━━━━━━━━━━━━━━━━━━━━━━
SITE 1 :
  - LAN : 192.168.10.0/24 (Utilisateurs)
  - DMZ : 192.168.20.0/24 (Services exposés)
  - ADMIN : 192.168.30.0/24 (Management)

SITE 2 :
  - LAN : 192.168.110.0/24 (Utilisateurs)
  - DMZ : 192.168.120.0/24 (Bastion + Services)
  - ADMIN : 192.168.130.0/24 (Management)

 VPN SITE-À-SITE :
━━━━━━━━━━━━━━━━━━━━
• Tunnel OpenVPN : 10.0.0.0/30
• Chiffrement : AES-256-GCM
• Authentification : RSA-4096 + Certificats
• Routage automatique entre tous les segments

 SÉCURITÉ :
━━━━━━━━━━━━━━━
• Pare-feu pfSense sur chaque site
• Règles de filtrage strictes (Least Privilege)
• Kill Switch d'urgence sur les deux sites
• Bastion Host avec 2FA pour accès externe
• Logging centralisé de toutes les connexions

 SERVICES CENTRALISÉS :
━━━━━━━━━━━━━━━━━━━━━━━━━
• IPAM : NetBox (Site 1) - Source de vérité unique
• Monitoring : Elasticsearch (Site 1) - Logs multi-sites
• DNS : Hiérarchie pfSense avec résolution croisée
• VPN Hub : Site 1 comme point central

 AUTOMATISATION :
━━━━━━━━━━━━━━━━━━━
• API NetBox pour gestion IP automatisée
• Synchronisation temps réel des configurations
• Templates IaC pour déploiement reproductible
• Webhooks pour mises à jour automatiques

MONITORING :
━━━━━━━━━━━━━━━━
• Collecte logs centralisée (Elasticsearch)
• Dashboards Kibana pour visualisation
• Métriques système et réseau (Beats)
• Alerting automatique sur anomalies

 PROCÉDURES D'URGENCE :
━━━━━━━━━━━━━━━━━━━━━━━━━━
• Kill Switch : Coupure VPN immédiate
• Isolation sites : Maintien accès bastion
• Recovery : Scripts automatisés de reconnexion
• Runbooks : Procédures détaillées de récupération

ÉVOLUTIVITÉ :
━━━━━━━━━━━━━━━━━
• Convention d'adressage extensible
• Templates réutilisables pour nouveaux sites
• Architecture Hub-and-spoke scalable
• Documentation automatisée de la topologie

 FLUX PRINCIPAUX :
━━━━━━━━━━━━━━━━━━━
1. Utilisateur externe → Bastion Host (SSH)
2. Site 1 ↔ Site 2 (VPN chiffré)
3. Tous les logs → Elasticsearch (Site 1)
4. Gestion IP → NetBox API (Site 1)
5. DNS : Résolution croisée entre sites
